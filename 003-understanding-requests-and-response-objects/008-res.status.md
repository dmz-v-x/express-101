## What is res.status

### 1. Why HTTP Status Codes Exist 

When a server responds to a client, it does **two things**:

- Sends **data** (response body)
- Sends a **status code**

The status code answers one core question:

**“Did this request succeed or fail?”**

Examples you already know:

- Page loads successfully → **200**
- Page not found → **404**
- Server crashes → **500**

Without status codes:

- Clients wouldn’t know what happened
- Browsers, apps, and APIs would break

---

### 2. Very Important Core Idea 

This is foundational:

- **Status code = result of the request**
- **Response body = details of what happened**

Think:

- Status → summary
- Body → explanation

Never mix their responsibilities.

---

### 3. Default Behavior in Express

If you write:

    res.send("Hello");

Express automatically sends:

- **Status: 200 OK**

So technically:

- You do NOT have to set a status code

But professionally:

- You **should** set it explicitly
- Especially for APIs and error handling

---

### 4. What Is `res.status()`?

`res.status(code)` is how you **set the HTTP status code**.

Example:

    res.status(200).send("OK");

This means:

- “Send this response”
- “Mark it as a success (200)”

---

### 5. Status Code Categories 

HTTP status codes are grouped by range:

| Range     | Meaning        |
|----------|----------------|
| 100–199  | Informational  |
| 200–299  | Success        |
| 300–399  | Redirect       |
| 400–499  | Client errors  |
| 500–599  | Server errors  |

In real-world backend work, you will mostly use:

- 200
- 201
- 400
- 401
- 403
- 404
- 500

---

### 6. Most Common Status Codes

#### Success
    res.status(200).send("OK");

#### Resource created
    res.status(201).send("User created");

#### Client error (bad input)
    res.status(400).send("Invalid input");

#### Unauthorized
    res.status(401).send("Login required");

#### Forbidden
    res.status(403).send("Access denied");

#### Not found
    res.status(404).send("User not found");

#### Server error
    res.status(500).send("Internal server error");

Each code has a **specific meaning**.
Do not use them randomly.

---

### 7. Chaining 

This works:

    res.status(200).json({ message: "OK" });

Why?

Because:

- `res.status()` returns `res` again

So you can chain:

- `.status()`
- `.send()`
- `.json()`

This is standard Express style.

---

### 8. Order Matters 

❌ **WRONG**

    res.send("Hello");
    res.status(200);

Why this fails:

- `res.send()` sends the response immediately
- Headers (including status) are finalized
- You cannot change them afterward

✅ **CORRECT**

    res.status(200).send("Hello");

---

### 9. What Actually Happens Internally 

When you call:

    res.send("Hello");

Express immediately:

- Sends headers
- Finalizes status code
- Sends body
- May close the connection

After this point:

- Status cannot be changed
- Headers are locked

That’s why calling `res.status()` afterward does nothing  
(or throws errors like **“Cannot set headers after they are sent”**).

---

### 10. Real-World Example: Validation

    app.post("/register", (req, res) => {
      if (!req.body.email) {
        return res.status(400).send("Email is required");
      }

      res.status(201).send("User registered");
    });

Why **201**?

- **201 Created** = a new resource was successfully created

This is professional API behavior.

---

### 11. Very Important Professional Insight 

Status codes must **match reality**.

❌ Bad practice:

    res.status(200).send("Error occurred");

Client sees:

- Status → success
- Body → error

This causes:

- Bugs
- Confusing client logic
- Broken retries and caching

---

### 12. Status vs Body 

| Question                      | Use        |
|-------------------------------|------------|
| Did the request succeed?      | Status     |
| What exactly happened?        | Body       |

If this table is clear, your APIs will be clean.

---

### 13. Common Beginner Mistakes 

- ❌ Always sending `200`
- ❌ Using wrong status codes
- ❌ Sending multiple responses
- ❌ Forgetting `return` after error responses

---

### 14. Classic Bug Example 

❌ Buggy code:

    if (!user) {
      res.status(404).send("Not found");
    }
    res.send("User data");

What happens:

- First response sent (404)
- Second response attempted
- ❌ Crash or warning

✅ Correct version:

    if (!user) {
      return res.status(404).send("Not found");
    }
    res.send("User data");

Always `return` after sending an error response.

---

### 15. Advanced Awareness: Status Codes Power Clients

Clients use status codes to:

- Retry requests
- Show error messages
- Redirect users
- Cache responses
- Trigger UI flows

Bad status codes = broken clients.

---

### 16. Connection to Everything You’ve Learned So Far

Now you fully control the request–response cycle:

- `req.*` → read input
- `res.status()` → describe result
- `res.send()` / `res.json()` → send data

This is **complete backend control**.

---

### 17. Minimal Mental Model 

If you remember one sentence:

**Status code = truth  
Response body = explanation**

