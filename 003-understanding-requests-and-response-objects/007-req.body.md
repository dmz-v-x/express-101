## What is req.body

### 1. What Is `req.body`?

So far, all the data youâ€™ve seen came from the **URL**:

- `req.params` â†’ data in the **path**
- `req.query` â†’ data **after `?`**

But real applications send data like:

- Login credentials
- Form submissions
- JSON payloads
- API request data

This data is **NOT** sent in the URL.

ðŸ‘‰ It is sent in the **request body**, and Express exposes it as:

- **`req.body`**

---

### 2. What Is a Request Body?

An **HTTP request body** is:

- Data sent **inside** the HTTP request
- Not visible in the URL
- Optional (not all requests have it)

Conceptual example:

    {
      "email": "user@test.com",
      "password": "secret"
    }

This data lives in:

- **`req.body`**

---

### 3. Where the Body Fits in an HTTP Request 

An HTTP request looks like this:

- Request line
- Headers
- (blank line)
- **Body** â† optional

Example:

    POST /login HTTP/1.1
    Content-Type: application/json

    { "email": "a@b.com", "password": "123" }

The **body** is:

    { "email": "a@b.com", "password": "123" }

Important insight:

- The body is just **raw bytes**
- Express does **not** know what it means yet

---

### 4. Very Important Rule 

**Express does NOT read or parse the request body by default.**

That means:

- `req.body === undefined`

âŒ Until you explicitly tell Express **how** to parse it

This is one of the **biggest beginner mistakes**.

---

### 5. What Does â€œParsingâ€ Mean?

**Parsing** means:

- Converting raw request data
- Into a usable JavaScript object

Example:

Raw body (bytes / string):

    { "email": "a@b.com", "password": "123" }

Parsed body (JavaScript object):

    {
      email: "a@b.com",
      password: "123"
    }

So when people say:

> â€œExpress parses the bodyâ€

They mean:

> â€œExpress reads the raw request stream and converts it into `req.body`â€

---

### 6. Why Express Does NOT Parse Body by Default

Express intentionally avoids automatic body parsing for several reasons:

#### 6.1 Bodies Can Be Large
- File uploads
- Videos
- Streams
- Binary data

Automatic parsing could:
- Consume huge memory
- Crash the server

---

#### 6.2 Many Body Formats Exist

Possible body formats include:

- JSON
- URL-encoded forms
- Multipart (file uploads)
- XML
- Plain text
- Binary

Express cannot safely guess the format.

---

#### 6.3 Parsing Costs CPU & Memory

- JSON parsing is expensive
- Multipart parsing is **very expensive**

---

#### 6.4 Security Reasons

Automatic parsing can expose you to:

- DoS attacks
- JSON bombs
- Malformed payload attacks

So Express says:

> **â€œYou choose what you want me to parse.â€**

---

### 7. Types of Request Bodies

| Body Type      | Common Use Case | Content-Type                          |
|----------------|-----------------|----------------------------------------|
| JSON           | APIs            | application/json                       |
| URL-encoded    | HTML forms      | application/x-www-form-urlencoded      |
| Multipart      | File uploads    | multipart/form-data                    |
| Raw / Text     | Special cases   | text/plain                             |

---

### 8. When Is `req.body` Used?

Request bodies are typically used with:

| Method | Body Allowed |
|-------|--------------|
| GET   | âŒ No         |
| POST  | âœ… Yes        |
| PUT   | âœ… Yes        |
| PATCH | âœ… Yes        |
| DELETE| âš ï¸ Sometimes |

âŒ Almost never with GET requests.

---

### 9. Simple Conceptual Example

Client sends:

    POST /login
    Body:
    {
      "email": "a@b.com",
      "password": "1234"
    }

Server wants to access:

- `req.body.email`
- `req.body.password`

But âŒ this does **NOT** work yet.

---

### 10. Enabling JSON Body Parsing 

To read JSON bodies, you **must** enable a body parser.

Add this **before your routes**:

    app.use(express.json());

---

### 11. Full Working Example

    const express = require("express");

    const app = express();

    // BODY PARSER (JSON)
    app.use(express.json());

    app.post("/login", (req, res) => {
      console.log(req.body);
      res.send("Login data received");
    });

    app.listen(3000);

---

### 12. What Does `express.json()` Actually Do?

Breakdown:

- `express.json()` is a **middleware function**
- It:
  - Reads the raw request body
  - Parses JSON
  - Attaches the result to `req.body`

---

### 13. Middleware 

**Middleware** is:

- A function that runs **before your route handler**

Flow:

Request  
â†’ `express.json()`  
â†’ `req.body` populated  
â†’ route handler runs  

---

### 14. Testing JSON Body

    curl -X POST http://localhost:3000/login \
      -H "Content-Type: application/json" \
      -d '{"email":"a@b.com","password":"1234"}'

Terminal output:

    { email: 'a@b.com', password: '1234' }

---

### 15. Critical Beginner Rules 

#### Rule 1 â€” Content-Type MUST Be Correct

If you forget:

    Content-Type: application/json

Then:

- `req.body === undefined`

---

#### Rule 2 â€” Body Exists Only for Certain Methods

Do not expect body data in GET requests.

---

### 16. URL-Encoded Bodies (HTML Forms)

HTML forms send data like this:

    email=a@b.com&password=1234

Example form:

    <form method="POST" action="/login">
      <input name="email" />
      <input name="password" />
    </form>

---

### 17. Enable Form Body Parsing

Add this middleware:

    app.use(express.urlencoded({ extended: true }));

Now your middleware setup should be:

    app.use(express.json());
    app.use(express.urlencoded({ extended: true }));

---

### 18. Form Data Example

    app.post("/login", (req, res) => {
      console.log(req.body);
      res.send("Form received");
    });

Now `req.body` works for HTML forms.

---

### 19. What Express DOES Parse by Default 

Express **automatically parses**:

#### 19.1 URL Parameters
    /users/42
    req.params â†’ { id: "42" }

#### 19.2 Query Strings
    /search?q=node&page=2
    req.query â†’ { q: "node", page: "2" }

#### 19.3 Headers
    req.headers

These are:
- Small
- Predictable
- Safe to parse

---

### 20. What Express Does NOT Parse by Default

âŒ Request body  
âŒ Cookies  
âŒ Multipart uploads  

Cookies require extra middleware.

---

### 21. Why Body Is Treated Differently 

| Data Type      | Size  | Format Variety | Parsed by Default |
|---------------|-------|----------------|-------------------|
| URL Params    | Small | Predictable    | âœ… Yes             |
| Query Params  | Small | URL-encoded    | âœ… Yes             |
| Headers       | Small | Standardized   | âœ… Yes             |
| Body          | Large | Many formats   | âŒ No              |

---

### 22. Common Beginner Mistakes (Very Important)

âŒ Forgetting body parser  
âŒ Placing middleware AFTER routes  
âŒ Wrong Content-Type  
âŒ Expecting body in GET requests  

---

### 23. Security & Limits

You can limit body size:

    app.use(express.json({ limit: "1mb" }));

This protects against:

- Huge payload attacks
- Memory abuse
- JSON bomb attacks

---

### 24. Minimal Mental Model (Lock This In)

If you remember one sentence:

> **`req.body` = data sent inside the request, parsed only if you enable it**



This is **core backend mastery** 
